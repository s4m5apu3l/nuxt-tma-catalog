import{e as N,f as I,g as p,c as o,o as r,a as t,t as n,h as s,i as x,w as k,b as j,_ as q,j as D,k as P,d as $,r as O,l as F,m as E,F as y,n as b,p as J,q as M}from"./CGidw6B-.js";import{_ as U}from"./DlAUqK2U.js";import{_ as T}from"./CKyEaWst.js";import{_ as G}from"./CXMMb_go.js";import{g as H}from"./EIiInBYa.js";import{f as K}from"./Cqe9Vini.js";import{u as Q}from"./CTynOHMU.js";import{u as R}from"./Xiu-_q9S.js";import"./BkcUQ56Y.js";import"./Bg3rBmSY.js";const L=(e,a,i="Unnamed")=>{if(!e)return i;if(typeof e=="object"&&e!==null)return e[a]||e.en||e.ru||i;if(typeof e=="string")try{const l=JSON.parse(e);return typeof l=="object"&&l!==null?l[a]||l.en||l.ru||i:e}catch{return e}return String(e||i)},z=(e,a)=>L(e.name,a,"Unnamed Category"),W=(e,a)=>L(e.name,a,"Unnamed Product"),X=(e,a)=>L(e,a,""),Y={class:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-2"},Z={class:"text-2xl"},tt={class:"text-xs text-center text-gray-700 dark:text-gray-300 font-medium leading-tight"},et=N({__name:"CategoryCard",props:{category:{},productCount:{default:0}},emits:["select"],setup(e,{emit:a}){const i=e,l=a,{locale:m}=I(),_=p(()=>z(i.category,m.value));return(f,c)=>(r(),o("div",{class:"flex flex-col items-center p-3 rounded-xl bg-white dark:bg-gray-800 shadow-sm active:shadow-md transition-all duration-200 cursor-pointer min-w-[110px]",onClick:c[0]||(c[0]=h=>l("select",e.category))},[t("div",Y,[t("span",Z,n(e.category.icon||"ðŸ“¦"),1)]),t("span",tt,n(s(_)),1)]))}}),st=Object.assign(U(et,[["__scopeId","data-v-6dcf15ae"]]),{__name:"CategoryCard"}),at={class:"aspect-square relative overflow-hidden rounded-t-lg bg-gray-100 dark:bg-gray-800"},rt=["src","alt"],ot={key:1,class:"w-full h-full flex items-center justify-center text-gray-400"},nt={class:"content py-2"},ct={class:"flex items-start justify-between gap-2 mb-1"},dt={class:"font-semibold text-lg text-gray-900 dark:text-gray-100 line-clamp-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors flex-1"},it={class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},lt={class:"flex items-center justify-between pt-2"},gt={class:"text-lg font-bold text-primary-600 dark:text-primary-400"},ut=N({__name:"ProductCard",props:{product:{}},setup(e){const a=e,{locale:i}=I(),l=p(()=>W(a.product,i.value)),m=p(()=>X(a.product.description,i.value)),_=p(()=>a.product.images&&a.product.images.length>0?a.product.images[0]:null),f=p(()=>_.value?H(_.value):null),c=p(()=>K(a.product.pricing,i.value));return(h,S)=>{const v=D,w=T,C=q,d=G;return r(),x(d,{class:"hover:shadow-lg transition-shadow duration-200 group"},{default:k(()=>[j(C,{to:`/product/${e.product.slug}`,class:"block"},{default:k(()=>[t("div",at,[s(f)?(r(),o("img",{key:0,src:s(f),alt:s(l),class:"w-full h-full object-cover",loading:"lazy"},null,8,rt)):(r(),o("div",ot,[j(v,{name:"i-lucide-image",class:"text-4xl"})]))]),t("div",nt,[t("div",ct,[t("h3",dt,n(s(l)),1)]),e.product.isAvailable?P("",!0):(r(),x(w,{key:0,color:"error",variant:"soft",size:"xs",class:"shrink-0"},{default:k(()=>[$(n(h.$t("product.unavailable")),1)]),_:1})),t("p",it,n(s(m)),1),t("div",lt,[t("div",gt,n(s(c)),1),j(v,{name:"i-lucide-chevron-right",class:"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})])])]),_:1},8,["to"])]),_:1})}}}),mt=Object.assign(U(ut,[["__scopeId","data-v-2e8f1fd1"]]),{__name:"ProductCard"}),pt={class:"space-y-6"},_t={class:"space-y-4"},yt={class:"flex items-center justify-between"},ft={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},ht={class:"relative"},xt={class:"flex gap-3 overflow-x-auto p-1 snap-x snap-mandatory scroll-smooth categories-scroll"},vt={key:0,class:"space-y-4"},bt={class:"grid grid-cols-2 gap-4"},kt={key:1,class:"space-y-4"},$t={class:"flex items-center justify-between"},wt={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Ct={class:"text-sm text-gray-500 dark:text-gray-400"},jt={key:0,class:"grid grid-cols-2 gap-4"},Pt={key:1,class:"grid grid-cols-2 gap-4"},Nt={class:"col-span-full text-center py-12"},It={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2"},Ut={class:"text-gray-600 dark:text-gray-400"},Lt=N({__name:"index",setup(e){const{categories:a,loading:i,fetchCategories:l}=Q(),{products:m,isLoading:_,fetchProducts:f}=R(),c=O(null),h=p(()=>c.value?m.value.filter(d=>d.categoryId===c.value?.$id):m.value),S=d=>{c.value=d},v=()=>{c.value=null};F(async()=>{await Promise.all([l(),f()])});const w=Array.from({length:6},(d,g)=>g),{locale:C}=I();return(d,g)=>{const B=E,V=st,A=mt;return r(),o("div",pt,[t("div",_t,[t("div",yt,[t("h2",ft,n(d.$t("categories.title")),1),s(c)?(r(),x(B,{key:0,variant:"ghost",size:"sm",onClick:v},{default:k(()=>[$(n(d.$t("common.showAll")),1)]),_:1})):P("",!0)]),t("div",ht,[t("div",xt,[s(i)?(r(),o(y,{key:0},b(5,u=>t("div",{key:`cat-skeleton-${u}`,class:"flex flex-col items-center p-3 rounded-xl bg-gray-100 dark:bg-gray-800 min-w-[80px] snap-start animate-pulse"},[...g[0]||(g[0]=[t("div",{class:"w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 mb-2"},null,-1),t("div",{class:"w-12 h-3 bg-gray-200 dark:bg-gray-700 rounded"},null,-1)])])),64)):s(a)&&s(a).length>0?(r(!0),o(y,{key:1},b(s(a),u=>(r(),x(V,{key:u.$id,category:u,class:J([{"ring-2 ring-primary-500":s(c)?.$id===u.$id},"snap-start"]),onSelect:S},null,8,["category","class"]))),128)):P("",!0)])])]),s(_)?(r(),o("div",vt,[g[2]||(g[2]=t("div",{class:"flex items-center justify-between"},[t("div",{class:"h-6 w-32 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),t("div",{class:"h-4 w-20 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})],-1)),t("div",bt,[(r(!0),o(y,null,b(s(w),u=>(r(),o("div",{key:`prod-skeleton-${u}`,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm animate-pulse"},[...g[1]||(g[1]=[M('<div class="aspect-square bg-gray-200 dark:bg-gray-700 rounded-t-lg" data-v-aba171a9></div><div class="p-4 space-y-2" data-v-aba171a9><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4" data-v-aba171a9></div><div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2" data-v-aba171a9></div><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3" data-v-aba171a9></div></div>',2)])]))),128))])])):(r(),o("div",kt,[t("div",$t,[t("h2",wt,[s(c)?(r(),o(y,{key:0},[$(n(s(z)(s(c),s(C))),1)],64)):(r(),o(y,{key:1},[$(n(d.$t("products.allProducts")),1)],64))]),t("span",Ct,n(s(h).length)+" "+n(d.$t("products.items")),1)]),s(m).length>0?(r(),o("div",jt,[(r(!0),o(y,null,b(s(h),u=>(r(),x(A,{key:u.$id,product:u},null,8,["product"]))),128))])):(r(),o("div",Pt,[t("div",Nt,[g[3]||(g[3]=t("div",{class:"text-6xl mb-4"},"ðŸ“¦",-1)),t("h3",It,n(d.$t("products.empty.title")),1),t("p",Ut,n(d.$t("products.empty.description")),1)])]))]))])}}}),Jt=U(Lt,[["__scopeId","data-v-aba171a9"]]);export{Jt as default};
