import{e as N,f as U,g as _,c as a,o as e,a as s,t as n,h as o,i as y,w as C,b as m,_ as D,j as O,k as S,d as j,r as q,l as F,m as E,F as x,n as w,p as J}from"./DJyH1og5.js";import{_ as M}from"./B5w-mIGz.js";import{_ as I}from"./DlAUqK2U.js";import{_ as T}from"./COLhSoRh.js";import{_ as G}from"./UFAAJMyF.js";import{g as H}from"./CBlsWPTx.js";import{f as K}from"./B5j1Kw8o.js";import{u as Q}from"./C5j0jcsD.js";import{u as R}from"./Cjs_hB6Y.js";import"./DPXtLpAx.js";import"./Cj-xscQC.js";const L=(t,r,c="Unnamed")=>{if(!t)return c;if(typeof t=="object"&&t!==null)return t[r]||t.en||t.ru||c;if(typeof t=="string")try{const i=JSON.parse(t);return typeof i=="object"&&i!==null?i[r]||i.en||i.ru||c:t}catch{return t}return String(t||c)},z=(t,r)=>L(t.name,r,"Unnamed Category"),W=(t,r)=>L(t.name,r,"Unnamed Product"),X=(t,r)=>L(t,r,""),Y={class:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-2"},Z={class:"text-2xl"},tt={class:"text-xs text-center text-gray-700 dark:text-gray-300 font-medium leading-tight line-clamp-2"},et=N({__name:"CategoryCard",props:{category:{},productCount:{default:0}},emits:["select"],setup(t,{emit:r}){const c=t,i=r,{locale:f}=U(),g=_(()=>z(c.category,f.value));return(k,h)=>(e(),a("div",{class:"flex flex-col items-center p-3 rounded-xl bg-white dark:bg-gray-800 shadow-sm active:shadow-md transition-all duration-200 cursor-pointer min-w-[110px]",onClick:h[0]||(h[0]=l=>i("select",t.category))},[s("div",Y,[s("span",Z,n(t.category.icon||"ðŸ“¦"),1)]),s("span",tt,n(o(g)),1)]))}}),st=Object.assign(I(et,[["__scopeId","data-v-38e04749"]]),{__name:"CategoryCard"}),ot={class:"aspect-square relative overflow-hidden rounded-t-lg bg-gray-100 dark:bg-gray-800"},rt=["src","alt"],at={key:1,class:"w-full h-full flex items-center justify-center text-gray-400"},nt={class:"content py-2"},ct={class:"flex items-start justify-between gap-2 mb-1"},it={class:"font-semibold text-gray-900 dark:text-gray-100 line-clamp-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors flex-1"},dt={class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},lt={class:"flex items-center justify-between pt-2"},ut={class:"text-lg font-bold text-primary-600 dark:text-primary-400 leading-5"},mt=N({__name:"ProductCard",props:{product:{}},setup(t){const r=t,{locale:c}=U(),i=_(()=>W(r.product,c.value)),f=_(()=>X(r.product.description,c.value)),g=_(()=>r.product.images&&r.product.images.length>0?r.product.images[0]:null),k=_(()=>g.value?H(g.value):null),h=_(()=>K(r.product.pricing,c.value));return(l,v)=>{const $=O,P=T,d=D,b=G;return e(),y(b,{ui:{body:"p-2"},class:"hover:shadow-lg transition-shadow duration-200 group"},{default:C(()=>[m(d,{to:`/product/${t.product.slug}`,class:"block"},{default:C(()=>[s("div",ot,[o(k)?(e(),a("img",{key:0,src:o(k),alt:o(i),class:"w-full h-full object-cover",loading:"lazy"},null,8,rt)):(e(),a("div",at,[m($,{name:"i-lucide-image",class:"text-4xl"})]))]),s("div",nt,[s("div",ct,[s("h3",it,n(o(i)),1)]),t.product.isAvailable?S("",!0):(e(),y(P,{key:0,color:"error",variant:"soft",size:"xs",class:"shrink-0"},{default:C(()=>[j(n(l.$t("product.unavailable")),1)]),_:1})),s("p",dt,n(o(f)),1),s("div",lt,[s("div",ut,n(o(h)),1),m($,{name:"i-lucide-chevron-right",class:"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})])])]),_:1},8,["to"])]),_:1})}}}),gt=Object.assign(I(mt,[["__scopeId","data-v-321a58ce"]]),{__name:"ProductCard"}),pt={class:"space-y-6"},_t={class:"space-y-4"},yt={class:"flex items-center justify-between"},ft={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},ht={class:"flex gap-3 overflow-x-auto p-1 snap-x snap-mandatory scroll-smooth categories-scroll"},xt={class:"space-y-4"},kt={class:"flex items-center justify-between"},vt={key:0,class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},$t={key:2,class:"text-sm text-gray-500 dark:text-gray-400"},bt={key:0,class:"grid grid-cols-2 gap-2"},wt={class:"p-4 space-y-2"},Ct={key:1,class:"grid grid-cols-2 gap-2"},jt={key:2,class:"text-center py-12"},Pt={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2"},Nt={class:"text-gray-600 dark:text-gray-400"},Ut=N({__name:"index",setup(t){const{categories:r,loading:c,fetchCategories:i}=Q(),{products:f,isLoading:g,fetchProducts:k}=R(),{locale:h}=U(),l=q(null),v=_(()=>l.value?f.value.filter(d=>d.categoryId===l.value?.$id):f.value),$=d=>{l.value=d},P=()=>{l.value=null};return F(async()=>{await Promise.all([i(),k()])}),(d,b)=>{const B=E,p=M,V=st,A=gt;return e(),a("div",pt,[s("div",_t,[s("div",yt,[s("h2",ft,n(d.$t("categories.title")),1),o(l)?(e(),y(B,{key:0,variant:"ghost",size:"sm",onClick:P},{default:C(()=>[j(n(d.$t("common.showAll")),1)]),_:1})):S("",!0)]),s("div",ht,[o(c)?(e(),a(x,{key:0},w(5,u=>s("div",{key:`cat-skeleton-${u}`,class:"flex flex-col items-center p-3 rounded-xl bg-gray-100 dark:bg-gray-800 min-w-[80px] snap-start"},[m(p,{class:"w-12 h-12 rounded-full mb-2"}),m(p,{class:"w-12 h-3 rounded"})])),64)):(e(!0),a(x,{key:1},w(o(r),u=>(e(),y(V,{key:u.$id,category:u,class:J([{"ring-2 ring-primary-500":o(l)?.$id===u.$id},"snap-start"]),onSelect:$},null,8,["category","class"]))),128))])]),s("div",xt,[s("div",kt,[o(g)?(e(),y(p,{key:1,class:"h-6 w-32 rounded"})):(e(),a("h2",vt,[o(l)?(e(),a(x,{key:0},[j(n(o(z)(o(l),o(h))),1)],64)):(e(),a(x,{key:1},[j(n(d.$t("products.allProducts")),1)],64))])),o(g)?(e(),y(p,{key:3,class:"h-4 w-20 rounded"})):(e(),a("span",$t,n(o(v).length)+" "+n(d.$t("products.items")),1))]),o(g)?(e(),a("div",bt,[(e(),a(x,null,w(6,u=>s("div",{key:`prod-skeleton-${u}`,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm"},[m(p,{class:"aspect-square rounded-t-lg"}),s("div",wt,[m(p,{class:"h-4 w-3/4 rounded"}),m(p,{class:"h-3 w-1/2 rounded"}),m(p,{class:"h-4 w-1/3 rounded"})])])),64))])):o(v).length>0?(e(),a("div",Ct,[(e(!0),a(x,null,w(o(v),u=>(e(),y(A,{key:u.$id,product:u},null,8,["product"]))),128))])):(e(),a("div",jt,[b[0]||(b[0]=s("div",{class:"text-6xl mb-4"},"ðŸ“¦",-1)),s("h3",Pt,n(d.$t("products.empty.title")),1),s("p",Nt,n(d.$t("products.empty.description")),1)]))])])}}}),Et=I(Ut,[["__scopeId","data-v-df2396cf"]]);export{Et as default};
