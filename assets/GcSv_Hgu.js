import{e as x,f as E,Q as C,R as B,T as S,r as P,l as F,c as u,o as e,a as t,i as L,k as N,b as p,m as R,t as V,h as a,F as $,n as I,w as T}from"./iOMO9ifF.js";import{_ as U}from"./DIbR9mKA.js";import{_ as z}from"./eDTYu0tF.js";import{u as D}from"./CFFuYFWj.js";import"./C8BWKteu.js";import"./DIEcgkMv.js";import"./BXJ7LWBG.js";import"./BkLbEH5J.js";import"./JnWOdnkA.js";import"./IbLqGGqO.js";import"./C_nfJ6bR.js";import"./jYiiPzsX.js";import"./C4qu2WBU.js";import"./BL39zgCe.js";import"./D8xujKC5.js";import"./BhJW3fow.js";import"./CaA2w-bX.js";const M={class:"space-y-4"},Q={class:"flex items-center space-x-3"},j={class:"text-xl font-bold text-foreground"},q={key:0,class:"space-y-4"},io=x({__name:"[id]",setup(A){const{t:o}=E(),l=C(),n=B(),c=S(),d=l.params.id,{product:m,isLoading:_,fetchProduct:f,updateProduct:g}=D(),i=P(!1),h=async r=>{i.value=!0;try{await g(d,{...r,$id:d}),c.add({title:o("admin.products.updateSuccess"),color:"success"}),await n.push("/admin/products")}catch(s){c.add({title:o("admin.products.updateError"),description:s instanceof Error?s.message:o("common.unknownError"),color:"error"})}finally{i.value=!1}},y=()=>{n.push("/admin/products")};return F(async()=>{try{await f(d)}catch(r){c.add({title:o("admin.products.loadError"),description:r instanceof Error?r.message:o("common.unknownError"),color:"error"}),await n.push("/admin/products")}}),(r,s)=>{const k=R,b=U,v=z;return e(),u("div",M,[t("div",Q,[p(k,{icon:"i-lucide-arrow-left",variant:"ghost",size:"sm",to:"/admin/products"}),t("h1",j,V(a(o)("admin.products.edit")),1)]),a(_)?(e(),u("div",q,[(e(),u($,null,I(3,w=>p(b,{key:w},{default:T(()=>[...s[0]||(s[0]=[t("div",{class:"space-y-4 animate-pulse"},[t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),t("div",{class:"h-10 bg-gray-200 dark:bg-gray-700 rounded"}),t("div",{class:"h-10 bg-gray-200 dark:bg-gray-700 rounded"})],-1)])]),_:1})),64))])):a(m)?(e(),L(v,{key:1,product:a(m),loading:a(i),onSubmit:h,onCancel:y},null,8,["product","loading"])):N("",!0)])}}});export{io as default};
