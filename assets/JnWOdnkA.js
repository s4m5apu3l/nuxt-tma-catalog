import{$ as q,W as b,ag as A,X as x,e as P,Y as B,Z as N,r as v,a0 as U,i as D,o as G,w as E,b as L,h as d,P as M,y as V}from"./iOMO9ifF.js";import{u as Y}from"./IbLqGGqO.js";function J(e,r){return q(e)?!1:Array.isArray(e)?e.some(n=>b(n,r)):b(e,r)}const $="rovingFocusGroup.onEntryFocus",k={bubbles:!1,cancelable:!0},K={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function j(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Q(e,r,n){const t=j(e.key,n);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return K[t]}function z(e,r=!1){const n=A();for(const t of e)if(t===n||(t.focus({preventScroll:r}),A()!==n))return}function ee(e,r){return e.map((n,t)=>e[(r+t)%e.length])}const[te,H]=x("RovingFocusGroup");var W=P({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:r,emit:n}){const t=e,g=n,{loop:I,orientation:m,dir:S}=B(t),F=Y(S),f=N(t,"currentTabStopId",g,{defaultValue:t.defaultCurrentTabStopId,passive:t.currentTabStopId===void 0}),i=v(!1),l=v(!1),p=v(0),{getItems:w,CollectionSlot:h}=U({isProvider:!0});function T(o){const s=!l.value;if(o.currentTarget&&o.target===o.currentTarget&&s&&!i.value){const u=new CustomEvent($,k);if(o.currentTarget.dispatchEvent(u),g("entryFocus",u),!u.defaultPrevented){const c=w().map(a=>a.ref).filter(a=>a.dataset.disabled!==""),C=c.find(a=>a.getAttribute("data-active")===""),_=c.find(a=>a.getAttribute("data-highlighted")===""),R=c.find(a=>a.id===f.value),O=[C,_,R,...c].filter(Boolean);z(O,t.preventScrollOnEntryFocus)}}l.value=!1}function y(){setTimeout(()=>{l.value=!1},1)}return r({getItems:w}),H({loop:I,dir:F,orientation:m,currentTabStopId:f,onItemFocus:o=>{f.value=o},onItemShiftTab:()=>{i.value=!0},onFocusableItemAdd:()=>{p.value++},onFocusableItemRemove:()=>{p.value--}}),(o,s)=>(G(),D(d(h),null,{default:E(()=>[L(d(M),{tabindex:i.value||p.value===0?-1:0,"data-orientation":d(m),as:o.as,"as-child":o.asChild,dir:d(F),style:{outline:"none"},onMousedown:s[0]||(s[0]=u=>l.value=!0),onMouseup:y,onFocus:T,onBlur:s[1]||(s[1]=u=>i.value=!1)},{default:E(()=>[V(o.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),re=W;export{re as R,J as a,z as f,Q as g,te as i,ee as w};
