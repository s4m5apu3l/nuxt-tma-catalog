import{e as P,f as N,g as k,c as a,o as e,a as s,t as n,h as o,i as y,w as b,b as m,_ as O,j as q,k as L,d as w,r as F,l as D,m as E,F as x,n as $,p as J}from"./DNRPXmkd.js";import{_ as M}from"./BdmYCEe7.js";import{_ as U}from"./DlAUqK2U.js";import{_ as T}from"./D_wG5jmn.js";import{_ as G}from"./CcKe6E5P.js";import{g as H}from"./DjSR4xoZ.js";import{f as K}from"./B5j1Kw8o.js";import{u as Q}from"./36WdM4Mw.js";import{u as R}from"./OLozrkoF.js";import"./BxcJFf2F.js";import"./BIQ_LZiA.js";const S=(t,r,d="Unnamed")=>{if(!t)return d;if(typeof t=="object"&&t!==null)return t[r]||t.en||t.ru||d;if(typeof t=="string")try{const c=JSON.parse(t);return typeof c=="object"&&c!==null?c[r]||c.en||c.ru||d:t}catch{return t}return String(t||d)},B=(t,r)=>S(t.name,r,"Unnamed Category"),W=(t,r)=>S(t.name,r,"Unnamed Product"),X={class:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-2"},Y={class:"text-2xl"},Z={class:"text-xs text-center text-gray-700 dark:text-gray-300 font-medium leading-tight line-clamp-2"},tt=P({__name:"CategoryCard",props:{category:{},productCount:{default:0}},emits:["select"],setup(t,{emit:r}){const d=t,c=r,{locale:p}=N(),g=k(()=>B(d.category,p.value));return(v,f)=>(e(),a("div",{class:"flex flex-col items-center p-3 rounded-xl bg-white dark:bg-gray-800 shadow-sm active:shadow-md transition-all duration-200 cursor-pointer min-w-[110px]",onClick:f[0]||(f[0]=l=>c("select",t.category))},[s("div",X,[s("span",Y,n(t.category.icon||"ðŸ“¦"),1)]),s("span",Z,n(o(g)),1)]))}}),et=Object.assign(U(tt,[["__scopeId","data-v-38e04749"]]),{__name:"CategoryCard"}),st={class:"aspect-square relative overflow-hidden rounded-t-lg bg-gray-100 dark:bg-gray-800"},ot=["src","alt"],rt={key:1,class:"w-full h-full flex items-center justify-center text-gray-400"},at={class:"content py-2"},nt={class:"flex items-start justify-between gap-2 mb-1"},ct={class:"font-semibold text-gray-900 dark:text-gray-100 line-clamp-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors flex-1"},it={class:"flex items-center justify-between pt-2"},dt={class:"text-lg font-bold text-primary-600 dark:text-primary-400 leading-5"},lt=P({__name:"ProductCard",props:{product:{}},setup(t){const r=t,{locale:d}=N(),c=k(()=>W(r.product,d.value)),p=k(()=>r.product.images&&r.product.images.length>0?r.product.images[0]:null),g=k(()=>p.value?H(p.value):null),v=k(()=>K(r.product.pricing,d.value));return(f,l)=>{const h=q,C=T,j=O,i=G;return e(),y(i,{ui:{body:"p-2"},class:"hover:shadow-lg transition-shadow duration-200 group"},{default:b(()=>[m(j,{to:`/product/${t.product.slug}`,class:"block"},{default:b(()=>[s("div",st,[o(g)?(e(),a("img",{key:0,src:o(g),alt:o(c),class:"w-full h-full object-cover",loading:"lazy"},null,8,ot)):(e(),a("div",rt,[m(h,{name:"i-lucide-image",class:"text-4xl"})]))]),s("div",at,[s("div",nt,[s("h3",ct,n(o(c)),1)]),t.product.isAvailable?L("",!0):(e(),y(C,{key:0,color:"error",variant:"soft",size:"xs",class:"shrink-0"},{default:b(()=>[w(n(f.$t("product.unavailable")),1)]),_:1})),s("div",it,[s("div",dt,n(o(v)),1),m(h,{name:"i-lucide-chevron-right",class:"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})])])]),_:1},8,["to"])]),_:1})}}}),ut=Object.assign(U(lt,[["__scopeId","data-v-04444cd1"]]),{__name:"ProductCard"}),mt={class:"space-y-6"},gt={class:"space-y-4"},_t={class:"flex items-center justify-between"},pt={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},yt={class:"flex gap-3 overflow-x-auto p-1 snap-x snap-mandatory scroll-smooth categories-scroll"},ft={class:"space-y-4"},ht={class:"flex items-center justify-between"},xt={key:0,class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},kt={key:2,class:"text-sm text-gray-500 dark:text-gray-400"},vt={key:0,class:"grid grid-cols-2 gap-2"},$t={class:"p-4 space-y-2"},bt={key:1,class:"grid grid-cols-2 gap-2"},wt={key:2,class:"text-center py-12"},Ct={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2"},jt={class:"text-gray-600 dark:text-gray-400"},Pt=P({__name:"index",setup(t){const{categories:r,loading:d,fetchCategories:c}=Q(),{products:p,isLoading:g,fetchProducts:v}=R(),{locale:f}=N(),l=F(null),h=k(()=>l.value?p.value.filter(i=>i.categoryId===l.value?.$id):p.value),C=i=>{l.value=i},j=()=>{l.value=null};return D(async()=>{await Promise.all([c(),v()])}),(i,I)=>{const z=E,_=M,V=et,A=ut;return e(),a("div",mt,[s("div",gt,[s("div",_t,[s("h2",pt,n(i.$t("categories.title")),1),o(l)?(e(),y(z,{key:0,variant:"ghost",size:"sm",onClick:j},{default:b(()=>[w(n(i.$t("common.showAll")),1)]),_:1})):L("",!0)]),s("div",yt,[o(d)?(e(),a(x,{key:0},$(5,u=>s("div",{key:`cat-skeleton-${u}`,class:"flex flex-col items-center p-3 rounded-xl bg-gray-100 dark:bg-gray-800 min-w-[80px] snap-start"},[m(_,{class:"w-12 h-12 rounded-full mb-2"}),m(_,{class:"w-12 h-3 rounded"})])),64)):(e(!0),a(x,{key:1},$(o(r),u=>(e(),y(V,{key:u.$id,category:u,class:J([{"ring-2 ring-primary-500":o(l)?.$id===u.$id},"snap-start"]),onSelect:C},null,8,["category","class"]))),128))])]),s("div",ft,[s("div",ht,[o(g)?(e(),y(_,{key:1,class:"h-6 w-32 rounded"})):(e(),a("h2",xt,[o(l)?(e(),a(x,{key:0},[w(n(o(B)(o(l),o(f))),1)],64)):(e(),a(x,{key:1},[w(n(i.$t("products.allProducts")),1)],64))])),o(g)?(e(),y(_,{key:3,class:"h-4 w-20 rounded"})):(e(),a("span",kt,n(o(h).length)+" "+n(i.$t("products.items")),1))]),o(g)?(e(),a("div",vt,[(e(),a(x,null,$(6,u=>s("div",{key:`prod-skeleton-${u}`,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm"},[m(_,{class:"aspect-square rounded-t-lg"}),s("div",$t,[m(_,{class:"h-4 w-3/4 rounded"}),m(_,{class:"h-3 w-1/2 rounded"}),m(_,{class:"h-4 w-1/3 rounded"})])])),64))])):o(h).length>0?(e(),a("div",bt,[(e(!0),a(x,null,$(o(h),u=>(e(),y(A,{key:u.$id,product:u},null,8,["product"]))),128))])):(e(),a("div",wt,[I[0]||(I[0]=s("div",{class:"text-6xl mb-4"},"ðŸ“¦",-1)),s("h3",Ct,n(i.$t("products.empty.title")),1),s("p",jt,n(i.$t("products.empty.description")),1)]))])])}}}),Ft=U(Pt,[["__scopeId","data-v-df2396cf"]]);export{Ft as default};
